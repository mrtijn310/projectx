@model Crouny.Web.Models.RulesViewModel

<script>
    function PerformRuleChange(element) {
        setTimeout(function () { $(element).parents('form').submit(); }, 200);
    }
</script>

<h1>@DateTime.Now.ToString("HH:mm")</h1>
<form action="#">
    <p class="range-field">
        <input type="range" id="test5" min="00:00" max="24:00" />
    </p>
</form>
<div class="row">
    @{ var counter = 0;}
    @foreach (var rule in Model.Rules)
    {

        <div class="col s12 m3">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">@rule.Title</span>
                    <p>@rule.Description</p>
                    <div class="cardSettings">

                    </div>
                </div>
                <div class="card-action bottom">
                    <div class="switch">
                        @using (Html.BeginForm())
                        {
                            <input type="hidden" id="@rule.RuleId" name="ruleId" value="@rule.RuleId"/>
                            <label>
                                <input name="Status" type="checkbox" value="true" @Html.Raw(rule.StateDecoded.Any(a => a.Name == "OnValue") ? "checked" : "") onClick="javascript: PerformRuleChange(this);">
                                <span class="lever"></span>
                            </label>
                        }
                    </div>
                </div>
            </div>
        </div>
        counter++;
    }
</div>
<div class="fixed-action-btn horizontal">
    <a class="btn-floating btn-large">
        <i class="material-icons">add</i>
    </a>
    <ul>
        <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a></li>
        <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
        <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
        <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
    </ul>
</div>
<p>settings</p>